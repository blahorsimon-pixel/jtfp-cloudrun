<view class="container">
  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>

  <view class="error" wx:elif="{{error}}">
    <text>{{error}}</text>
    <button class="btn-retry" bindtap="reload">重试</button>
  </view>

  <view wx:else>
    <view class="empty" wx:if="{{orders.length == 0}}">
      <text class="empty-title">暂无订单</text>
    </view>

    <view class="order" wx:for="{{orders}}" wx:key="order_no" data-orderno="{{item.order_no}}" bindtap="goDetail">
      <view class="order-head">
        <text class="order-no">订单号：{{item.order_no}}</text>
        <text class="order-status">{{item.status_cn || item.status}}</text>
      </view>

      <view class="order-body">
        <image class="cover" src="{{item.cover_url}}" mode="aspectFill" />
        <view class="info">
          <text class="title">{{item.sku_title || ''}}</text>
          <view class="meta">
            <text class="qty">x{{item.quantity || 1}}</text>
            <text class="price">¥{{(item.total_amount || 0) / 100}}</text>
          </view>
        </view>
      </view>

      <view class="order-foot">
        <button
          class="btn btn-pay"
          wx:if="{{item.status == 'PENDING_PAYMENT'}}"
          data-orderno="{{item.order_no}}"
          catchtap="payNow"
        >
          去支付
        </button>
        <button class="btn btn-ghost" data-orderno="{{item.order_no}}" catchtap="goDetail">查看详情</button>
      </view>
    </view>
  </view>
</view>
