<!--é¦–é¡µ-->
<view class="container">
  <!-- åº—é“ºé¡µçœ‰ -->
  <shop-header></shop-header>

  <!-- æœç´¢æ  -->
  <view class="search-bar" bindtap="goToSearch">
    <view class="search-input">
      <text class="search-icon">ğŸ”</text>
      <text class="search-placeholder">æœç´¢å•†å“</text>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-dot"></view>
    <view class="loading-dot"></view>
    <view class="loading-dot"></view>
  </view>

  <!-- é”™è¯¯æç¤º -->
  <view class="error" wx:elif="{{error}}">
    <text class="error-text">{{error}}</text>
    <button class="btn-retry" bindtap="loadProducts">é‡è¯•</button>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <view class="product-grid" wx:else>
    <view
      class="product-card"
      wx:for="{{products}}"
      wx:key="id"
      data-id="{{item.id}}"
      bindtap="goToProduct"
    >
      <image
        class="product-image"
        src="{{item.cover_url || '/assets/images/tab-home.png'}}"
        mode="aspectFill"
        lazy-load
      />
      <view class="product-info">
        <text class="product-title ellipsis-2">{{item.title}}</text>
        <view class="product-price">
          <text class="price-symbol">Â¥</text>
          <text class="price-value">{{item.price_cent / 100}}</text>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{products.length == 0}}">
      <text>æš‚æ— å•†å“</text>
    </view>
  </view>

  <!-- å®¢æœæ‚¬æµ®æŒ‰é’® -->
  <kefu-float></kefu-float>
</view>
